<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.zuoqy.blog.dao.MemberDao">
	
	<insert id="addMember" parameterType="member">
		insert into member(mid,email,name,pwd,img,createTime,isActivate) value(#{mid,jdbcType=VARCHAR},#{email,jdbcType=VARCHAR},#{name,jdbcType=VARCHAR},#{pwd,jdbcType=VARCHAR},#{img,jdbcType=VARCHAR},now(),'N')		
	</insert>
	
	<select id="getMember" parameterType="java.util.Map" resultType="member">
		select * from member where 1=1 
		<if test="email!=null and email!=''">
			and email=#{email}
		</if>
		<if test="pwd!=null and pwd!=''">
			and pwd=#{pwd}
		</if>
		<if test="name!=null and name!=''">
			and name=#{name}
		</if>
	</select>
	
	<update id="updateMember" parameterType="java.util.Map">
		update member
		<set>
			<if test="token!=null and token!=''"> token=#{token}, </if>
			<if test="pwd!=null and pwd!=''"> pwd=#{pwd}, </if>
			<if test="name!=null and name!=''"> name=#{name}, </if>
			<if test="sign!=null and sign!=''"> sign=#{sign}, </if>
			<if test="city!=null and city!=''"> city=#{city}, </if>
			<if test="img!=null and img!=''"> img=#{img}, </if>
			<if test="isActivate!=null and isActivate!=''"> isActivate=#{isActivate}, </if>
			<if test="emailOld!=null and emailOld!=''">email=#{emailOld}</if>
		</set>
		where
		<if test="email!=null and email!=''">
			email=#{email}
		</if>
		<if test="mid!=null and mid!=''">
			mid=#{mid}
		</if>
	</update>
	
	
</mapper>
